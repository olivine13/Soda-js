<div style="position:relative;">
	<div [hidden]="mode!='road'" class="toolbar">
		<div class="timeBar">
			<h2>{{WEEKDAY[weather?.week]}}</h2>
			<h3>{{systemTime?.getHours()}}:{{systemTime?.getMinutes()}}</h3>
			<hr>
			<p>请选取要查看时段的路段图:</p>
			<ngb-timepicker [(ngModel)]="time" [spinners]="spinners"></ngb-timepicker>
			<button (click)="onPickTimeWithWeather(time.hour,weatherChecked)" class="btn btn-default">查看</button>
		</div>
		<hr>
		<div [(ngModel)]="weatherChecked" ngbRadioGroup name="radioBasic">
			<label class="btn btn-primary">
    			<input type="radio" value="sunny" (click)="onPickTimeWithWeather(time.hour,weatherChecked)">
				<img src="app/images/weather0.png">
  			</label>
			<label class="btn btn-primary">
    			<input type="radio" value="rainy" (click)="onPickTimeWithWeather(time.hour,weatherChecked)">
				<img src="app/images/weather1.png">
  			</label>
			<label class="btn btn-primary">
    			<input type="radio" value="medium-rainy" (click)="onPickTimeWithWeather(time.hour,weatherChecked)">
				<img src="app/images/weather2.png">
  			</label>
		</div>
		<div class="input-group">
			<input name="roadname" required [(ngModel)]="roadname" class="form-control" type="text" placeholder="请输入路段名称">
			<span class="input-group-btn">
				<button (click)="onShowRoad()" class="btn btn-default" type="button">确定</button>
			</span>
		</div>
		<div>
			<table class="table table-hover">
				<caption>路段安全指数</caption>
				<thead>
					<tr>
						<th>路段ID</th>
						<th>路段名称</th>
						<th>安全指数</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let road of roadList">
						<td>{{road.id}}</td>
						<td>{{road.name}}</td>
						<td>{{road.rate}}</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div [hidden]="mode!='company'" class="toolbar" id="companyMode">
		<div class="input-group">
			<input name="companyname" required [(ngModel)]="companyname" class="form-control" type="text" placeholder="请输入企业名称">
			<span class="input-group-btn">
				<button (click)="onShowCompany()" class="btn btn-default" type="button">搜索</button>
			</span>
		</div>
		<span class="label label-primary">排序方式</span>
		<div class="btn-group">
			<button (click)="onSortCompany(0)" type="button" class="btn btn-default">安全指数</button>
			<button (click)="onSortCompany(1)" type="button" class="btn btn-default">事故数</button>
		</div>
		<br/>
		<br/>
		<p style="float:right;">找到记录:{{companyList.length}}</p>
		<div>
			<table class="table table-hover">
				<caption>企业安全指数</caption>
				<thead>
					<tr>
						<th>企业名称</th>
						<th>安全指数</th>
						<th>事故数</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let company of companyList">
						<td>{{company.name}}</td>
						<td>{{company.rate}}</td>
						<td>{{company.accident}}</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div id="map"></div>
	<div class="rate" [hidden]="mode!='road'">
		<p style="-webkit-text-fill-color: #000">路段安全指数</p>
		<p style="background-color:#aa0008">非常低(0-25)</p>
		<p style="background-color:#ec1524">低(25-50)</p>
		<p style="background-color:#fd901d">高(50-75)</p>
		<p style="background-color:#24ba0c">非常高(75-100)</p>
	</div>
	<div class="rate" [hidden]="mode!='company'">
		<p style="-webkit-text-fill-color: #000">企业安全指数</p>
		<p style="background-color:#aa0008">非常低(0-25)</p>
		<p style="background-color:#ec1524">低(25-50)</p>
		<p style="background-color:#fd901d">高(50-75)</p>
		<p style="background-color:#24ba0c">非常高(75-100)</p>
	</div>
	<div [hidden]="selectCompany==null" class="result" id="carInfo">
		<chart [options]="rateChartOptions" (load)="saveRateChartInstance($event.context)"></chart>
		<chart [options]="accidentChartOptions" (load)="saveAccidentChartInstance($event.context)"></chart>
	</div>
</div>